<div class="listings-container">
  <app-filter (filtersChanged)="onFiltersChanged($event)"></app-filter>

  <div class="properties-grid">
    <div
      class="property-card"
      *ngFor="let property of visibleProperties"
      (click)="viewDetails()"
    >
      <div class="property-image">
        <img [src]="property.image" [alt]="property.title" />
      </div>

      <div class="property-content">
        <div class="property-header">
          <h3 class="property-title">{{ property.title }}</h3>
          <div class="property-actions">
            <button
      class="Icon-button-small favorite-button"
      [class.active]="property.isFavorite"
      (click)="toggleFavorite(property); $event.stopPropagation()"
      aria-label="Add to favorites"
>
    <svg
       class="heart-icon"
       width="24"
       height="24"
       viewBox="0 0 24 24"
       xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M2 9.50004C2.00002 8.38724 2.33759 7.30062 2.96813 6.3837C3.59867 5.46678 4.49252 4.7627 5.53161 4.36444C6.5707 3.96618 7.70616 3.89248 8.78801 4.15308C9.86987 4.41368 10.8472 4.99632 11.591 5.82404C11.6434 5.88005 11.7067 5.92471 11.7771 5.95524C11.8474 5.98577 11.9233 6.00152 12 6.00152C12.0767 6.00152 12.1526 5.98577 12.2229 5.95524C12.2933 5.92471 12.3566 5.88005 12.409 5.82404C13.1504 4.99094 14.128 4.40341 15.2116 4.13964C16.2952 3.87588 17.4335 3.94839 18.4749 4.34752C19.5163 4.74666 20.4114 5.45349 21.0411 6.37394C21.6708 7.29439 22.0053 8.3848 22 9.50004C22 11.79 20.5 13.5 19 15L13.508 20.313C13.3217 20.527 13.0919 20.699 12.834 20.8173C12.5762 20.9357 12.296 20.9979 12.0123 20.9997C11.7285 21.0015 11.4476 20.9429 11.1883 20.8278C10.9289 20.7127 10.697 20.5437 10.508 20.332L5 15C3.5 13.5 2 11.8 2 9.50004Z"
      stroke="#F2A250"
      stroke-width="1.5"
      stroke-linecap="round"
      stroke-linejoin="round"
      fill="none"
    />
  </svg>
</button>

          </div>
        </div>

        <div class="property-address">
          <img [src]="'assets/Icons/map-pin.png'" />
          <span>{{ property.address }}</span>
        </div>

        <div class="property-status">
          <span
            class="availability-badge"
            [class.available]="property.availability === 'available'"
            [class.unavailable]="property.availability === 'unavailable'"
          >
            {{
              property.availability === "available"
                ? "Available"
                : "Unavailable"
            }}
          </span>
          <a class="view-details-link" (click)="viewDetails()">View Details</a>
        </div>

        <div class="property-details">
          <div class="property-price">R {{ property.price }}/mo</div>
          <div class="property-type">
            <img [src]="property.roomIcon" [alt]="property.title" />
            <span>{{ property.type }}</span>
          </div>
        </div>

        <div class="property-meta">
          <div class="meta-item" *ngIf="property.availabilityDate">
            <img [src]="'assets/Icons/calendar-check-2.png'" />
            <span>Availability: {{ property.availabilityDate }}</span>
          </div>

          <div class="meta-item">
            <img [src]="'assets/Icons/eye.png'" />
            <span>{{ property.views }} views</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="pagination-buttons">
    <button
      class="btn-find filter-buttons"
      *ngIf="currentPage > 1"
      (click)="loadPrevious()"
    >
      Previous
      <!-- <app-loader-btn
        [active]="loading && loadingButton === 'previous'"
      ></app-loader-btn>-->
    </button>

    <button
      class="btn-find filter-buttons"
      (click)="loadMore()"
      *ngIf="currentPage * itemsPerPage < filteredProperties.length"
    >
      Load More
    </button>
  </div>

  <app-dash-footer></app-dash-footer>
</div>
