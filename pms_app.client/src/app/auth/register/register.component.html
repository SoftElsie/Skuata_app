<div class="page-layout">
  <div class="signup-container">
    <div class="full-page-wrapper" *ngIf="!showForm">
      <header class="signup-header">
        <div class="header-icon"></div>
      </header>

      <main class="signup-box">
        <h2>Sign up as renter or property owner</h2>

        <div class="choice-cards">
          <div class="choice-card" [class.selected]="selectedRole === 'renter'" (click)="selectRole('renter')">
            <div class="card-header">
              <img src="assets/bed.png" alt="Bed icon" class="icon">
              <input type="radio" name="role" [checked]="selectedRole === 'renter'">
            </div>
            <hr class="card-divider">
            <p>I am a <span class="highlight">renter</span>, looking for a <span class="highlight">room to rent</span>.</p>
          </div>

          <div class="choice-card" [class.selected]="selectedRole === 'owner'" (click)="selectRole('owner')">
            <div class="card-header">
              <img src="assets/user-round.png" alt="User icon" class="icon">
              <input type="radio" name="role" [checked]="selectedRole === 'owner'">
            </div>
            <hr class="card-divider">
            <p>I am a <span class="highlight">property owner</span>, looking for <span class="highlight">people to rent</span>.</p>
          </div>
        </div>

        <button class="signup-btn" (click)="onSignUp()">Sign Up</button>

        <div *ngIf="showRoleError" class="role-error-message">
          Please select Renter or Property Owner.
        </div>

        <div class="login-link">
          <span>Already have an account? <a href="#">Login</a></span>
        </div>
      </main>
    </div>

    <div *ngIf="showForm">
      <form [formGroup]="regForm" (ngSubmit)="onSubmit()">

        <h2 class="form-title">Set up your profile</h2>
        <div class="form-container">

          <div class="form-group">
            <label for="firstName">First Name</label>
            <div class="input-wrapper icon-field" [class.input-error]="regForm.get('firstName')!.invalid && (regForm.get('firstName')!.dirty || regForm.get('firstName')!.touched)">
              <img src="assets/user-round.png" alt="User Icon" class="input-icon">
              <input
                type="text"
                id="firstName"
                placeholder="e.g. John"
                formControlName="firstName"
              >
            </div>
            <div class="error-message" *ngIf="regForm.get('firstName')!.invalid && (regForm.get('firstName')!.dirty || regForm.get('firstName')!.touched)">
              <span *ngIf="regForm.get('firstName')!.errors?.['required']">First Name is required.</span>
            </div>
          </div>
          <div class="form-group">
            <label for="lastName">Last Name</label>
            <div class="input-wrapper icon-field" [class.input-error]="regForm.get('lastName')!.invalid && (regForm.get('lastName')!.dirty || regForm.get('lastName')!.touched)">
              <img src="assets/user-round.png" alt="User Icon" class="input-icon">
              <input
                type="text"
                id="lastName"
                placeholder="e.g. Doe"
                formControlName="lastName"
              >
            </div>
            <div class="error-message" *ngIf="regForm.get('lastName')!.invalid && (regForm.get('lastName')!.dirty || regForm.get('lastName')!.touched)">
              <span *ngIf="regForm.get('lastName')!.errors?.['required']">Last Name is required.</span>
            </div>
          </div>
          <div class="form-group">
            <label for="province">Province</label>
            <div class="input-wrapper select-wrapper" [class.input-error]="regForm.get('province')!.invalid && (regForm.get('province')!.dirty || regForm.get('province')!.touched)">
              <select
                id="province"
                formControlName="province"
              >
                <option value="" disabled selected hidden>Select Province</option>
                <option value="GP">Gauteng</option>
                <option value="KZN">KwaZulu-Natal</option>
                <option value="WC">Western Cape</option>
              </select>
            </div>
            <div class="error-message" *ngIf="regForm.get('province')!.invalid && (regForm.get('province')!.dirty || regForm.get('province')!.touched)">
              <span *ngIf="regForm.get('province')!.errors?.['required']">Province is required.</span>
            </div>
          </div>
          <div class="form-group">
            <label for="email">Emails</label>
            <div class="input-wrapper icon-field" [class.input-error]="regForm.get('email')!.invalid && (regForm.get('email')!.dirty || regForm.get('email')!.touched)">
              <img src="assets/at-sign.png" alt="Email Icon" class="input-icon">
              <input
                type="email"
                id="email"
                placeholder="johndoe@example.com"
                formControlName="email"
              >
            </div>
            <div class="error-message" *ngIf="regForm.get('email')!.invalid && (regForm.get('email')!.dirty || regForm.get('email')!.touched)">
              <span *ngIf="regForm.get('email')!.errors?.['required']">Email is required.</span>
              <span *ngIf="regForm.get('email')!.errors?.['email']">Enter a valid email address.</span>
            </div>
          </div>

          <div class="form-group">
            <label for="password">Password</label>
            <div class="input-wrapper icon-field" [class.input-error]="regForm.get('password')!.invalid && (regForm.get('password')!.dirty || regForm.get('password')!.touched)">
              <img src="assets/lock-keyhole.png" alt="Password Icon" class="input-icon">
              <input
                type="password"
                id="password"
                placeholder="**************"
                formControlName="password"
              >
            </div>
            <div class="error-message" *ngIf="regForm.get('password')!.invalid && (regForm.get('password')!.dirty || regForm.get('password')!.touched)">
              <span *ngIf="regForm.get('password')!.errors?.['required']">Password is required.</span>
              <span *ngIf="regForm.get('password')!.errors?.['minlength']">Password must be at least 8 characters.</span>
            </div>
          </div>
          <button type="submit" class="submit-button" [disabled]="regForm.invalid">Continue <img src="assets/chevron-right.png" alt="Continue" class="button-icon"></button>

        </div>
      </form>

    </div>
    
</div>
